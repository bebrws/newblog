<!DOCTYPE html><html><head><script type="text/javascript" class="jsx-707554062">
          
          function loadBevySnake() {
            setTimeout(function() {
            var element = document.getElementById('bevy-portal');
                  if (element) {
                    console.log('Element with id "bevy-portal" exists. Adding script tag.');

                  var script = document.createElement('script');
                  script.type = 'module';
                  script.src = '../static/load-bevy-snake.js';
                  document.head.appendChild(script);
            } else {
                    console.log('Element with id "bevy-portal" does not exist.');
                    loadBevySnake();
            }
          }, 500);
        }

        loadBevySnake();
      </script><script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=UA-154810525-2" class="jsx-707554062"></script><script type="text/javascript" class="jsx-707554062">
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'UA-154810525-2');
        </script><script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=G-BZKS5D8HPF" class="jsx-707554062"></script><script type="text/javascript" class="jsx-707554062">
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-BZKS5D8HPF');
        </script><meta charSet="utf-8" class="jsx-707554062"/><meta name="viewport" content="width=device-width, initial-scale=1" class="jsx-707554062"/><link rel="manifest" href="/site.webmanifest" class="jsx-707554062"/><link rel="apple-touch-icon" href="/icon.png" class="jsx-707554062"/><meta name="theme-color" content="#fff" class="jsx-707554062"/><title>Alacritty - tab support | Brad Barrows&#x27; Blog</title><meta name="description" content="Brad Barrows&#x27; Blog"/><link rel="canonical" href="https://bbarrows.com/posts/alacritty-tabs"/><meta property="og:site_name" content="Brad Barrows&#x27; Blog"/><meta property="og:url" content="https://bbarrows.com/posts/alacritty-tabs"/><meta property="og:title" content="Alacritty - tab support | Brad Barrows&#x27; Blog"/><meta property="og:description" content="Brad Barrows&#x27; Blog"/><meta property="og:image" content="https://bbarrows.com/og_image.png"/><meta property="og:type" content="article"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":"https://bbarrows.com/posts/alacritty-tabs","headline":"Alacritty - tab support","datePublished":"2021-01-17T00:00:00-08:00","author":"Brad Barrows","description":""}</script><meta name="next-head-count" content="20"/><link rel="preload" href="/_next/static/css/8e11f38ccf46f6277e39.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8e11f38ccf46f6277e39.css" data-n-g=""/><link rel="preload" href="/_next/static/css/e884486185169a1848b2.css" as="style"/><link rel="stylesheet" href="/_next/static/css/e884486185169a1848b2.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-f47d69457824065d04c3.js" defer=""></script><script src="/_next/static/chunks/framework-895f067827ebe11ffe45.js" defer=""></script><script src="/_next/static/chunks/main-d32200c037819e7e8fa0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-eae7af63eb651790e0a7.js" defer=""></script><script src="/_next/static/chunks/962-b2e3b32260744832b5cf.js" defer=""></script><script src="/_next/static/chunks/295-d2a92dd57ddb2277243a.js" defer=""></script><script src="/_next/static/chunks/pages/projects/%5Bproject%5D-1ea853b526c47a742191.js" defer=""></script><script src="/_next/static/rjKr5klLgyvolA-jXqYtb/_buildManifest.js" defer=""></script><script src="/_next/static/rjKr5klLgyvolA-jXqYtb/_ssgManifest.js" defer=""></script><style id="__jsx-3058196896">.container.jsx-3058196896{position:fixed;width:38px;height:38px;cursor:pointer;top:1rem;left:1.25rem;z-index:2;background-color:rgba(255,255,255,0.7);}.meat.jsx-3058196896{position:absolute;width:28px;height:2px;background:#222;top:calc(50% - 2px / 2);left:calc(50% - 28px / 2);-webkit-transition:all 150ms ease-in;transition:all 150ms ease-in;}.meat-1.jsx-3058196896{-webkit-transform:translateY(-10px);-ms-transform:translateY(-10px);transform:translateY(-10px);}.meat-2.jsx-3058196896{width:calc(28px - 6px);}.meat-3.jsx-3058196896{-webkit-transform:translateY(10px);-ms-transform:translateY(10px);transform:translateY(10px);}.active.jsx-3058196896 .meat-1.jsx-3058196896{-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);}.active.jsx-3058196896 .meat-2.jsx-3058196896{opacity:0;}.active.jsx-3058196896 .meat-3.jsx-3058196896{-webkit-transform:rotate(-45deg);-ms-transform:rotate(-45deg);transform:rotate(-45deg);}@media (min-width:769px){.container.jsx-3058196896{display:none;}}</style><style id="__jsx-4138737674">.container.jsx-4138737674{width:0;}ul.jsx-4138737674{opacity:0;width:100%;height:100vh;text-align:right;list-style:none;margin:0;padding:0;position:fixed;top:0;background-color:#fff;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;z-index:1;-webkit-transform:translateY(100%);-ms-transform:translateY(100%);transform:translateY(100%);-webkit-transition:opacity 200ms;transition:opacity 200ms;}.active.jsx-4138737674 ul.jsx-4138737674{opacity:1;-webkit-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0);}li.jsx-4138737674{margin-bottom:1.75rem;font-size:2rem;padding:0 1.5rem 0 0;}li.jsx-4138737674:last-child{margin-bottom:0;}.active.jsx-4138737674{color:#222;}@media (min-width:769px){.container.jsx-4138737674{width:7rem;display:block;}ul.jsx-4138737674{opacity:1;width:7rem;top:auto;display:block;-webkit-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0);}li.jsx-4138737674{font-size:1rem;padding:0;}}</style><style id="__jsx-3674465219">span.jsx-3674465219{color:#9b9b9b;}</style><style id="__jsx-255066894">a.jsx-255066894{display:inline-block;}a.jsx-255066894:not(:last-child){margin-right:2em;}</style><style id="__jsx-3618008669">p.jsx-3618008669{font-size:0.75rem;text-align:center;}</style><style id="__jsx-4153080612">.container.jsx-3387257903{display:block;max-width:60rem;width:100%;margin:0 auto;padding:0 1.5rem;box-sizing:border-box;z-index:0;}.metadata.jsx-3387257903 div.jsx-3387257903{display:inline-block;margin-right:0.5rem;}article.jsx-3387257903{-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;}h1.jsx-3387257903{margin:0 0 0.5rem;font-size:2.25rem;}.tag-list.jsx-3387257903{list-style:none;text-align:right;margin:1.75rem 0 0 0;padding:0;}.tag-list.jsx-3387257903 li.jsx-3387257903{display:inline-block;margin-left:0.5rem;}.social-list.jsx-3387257903{margin-top:3rem;text-align:center;}@media (min-width:769px){.container.jsx-3387257903{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}</style><style id="__jsx-1699270818">.token.comment,.token.prolog,.token.doctype,.token.cdata,.token.plain-text{color:#6a737d;}.token.atrule,.token.attr-value,.token.keyword,.token.operator{color:#d73a49;}.token.property,.token.tag,.token.boolean,.token.number,.token.constant,.token.symbol,.token.deleted{color:#22863a;}.token.selector,.token.attr-name,.token.string,.token.char,.token.builtin,.token.inserted{color:#032f62;}.token.function,.token.class-name{color:#6f42c1;}.language-jsx .token.punctuation,.language-jsx .token.tag .token.punctuation,.language-jsx .token.tag .token.script,.language-jsx .token.plain-text{color:#24292e;}.language-jsx .token.tag .token.attr-name{color:#6f42c1;}.language-jsx .token.tag .token.class-name{color:#005cc5;}.language-jsx .token.tag .token.script-punctuation,.language-jsx .token.attr-value .token.punctuation:first-child{color:#d73a49;}.language-jsx .token.attr-value{color:#032f62;}.language-jsx span[class="comment"]{color:pink;}.language-html .token.tag .token.punctuation{color:#24292e;}.language-html .token.tag .token.attr-name{color:#6f42c1;}.language-html .token.tag .token.attr-value,.language-html .token.tag .token.attr-value .token.punctuation:not(:first-child){color:#032f62;}.language-css .token.selector{color:#6f42c1;}.language-css .token.property{color:#005cc5;}</style><style id="__jsx-707554062">.root.jsx-707554062{display:block;padding:4rem 0;box-sizing:border-box;height:100%;}main.jsx-707554062{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;min-height:100%;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}@media (min-width:769px){.root.jsx-707554062{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;}main.jsx-707554062{-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;}}</style></head><body><div id="__next"><div class="jsx-707554062 root"><nav class="jsx-707554062"><div class="jsx-3058196896 container "><div class="jsx-3058196896 meat meat-1"></div><div class="jsx-3058196896 meat meat-2"></div><div class="jsx-3058196896 meat meat-3"></div></div><div class="jsx-4138737674 container "><ul class="jsx-4138737674"><li class="jsx-4138737674"><a class="jsx-4138737674 " href="/">about</a></li><li class="jsx-4138737674"><a class="jsx-4138737674 active" href="/projects">projects</a></li><li class="jsx-4138737674"><a class="jsx-4138737674 " href="/posts">blog</a></li></ul></div></nav><main class="jsx-707554062"><div class="jsx-3387257903 container"><article class="jsx-3387257903"><header class="jsx-3387257903"><h1 class="jsx-3387257903">Alacritty - tab support</h1><div class="jsx-3387257903 metadata"><div class="jsx-3387257903"><time dateTime="2021-01-17T00:00:00-08:00" class="jsx-3674465219"><span class="jsx-3674465219">January 17, 2021</span></time></div><div class="jsx-3387257903"><span class="jsx-3674465219">Brad Barrows</span></div></div></header><div class="jsx-3387257903 content_content__1yuPc"><div><h2>Re-Write of The Alacritty Event Loop</h2><p>While getting started on this I found an awesome project named <a href="https://github.com/nw0/session-manager">session-manager</a>.</p><p>This provided a great way for me to see how the lower level TTY code and ansi processing was implemented.</p><p>I played around with this for a while, adding support for colors and then upon realizing that most of this session-manager code came from Alacritty, decided that I should give adding tabs to Alacritty a shot.</p><p>When digging into the Alacritty source I realized I would need some struct to manage the tabs and Term/PTY struct state throughout the app. Unfortunately this meant passing around an</p><pre><code>Arc&lt;Mutex&lt;T&gt;&gt;
</code></pre><p>and lots of locking and unlocking.</p><p>Luckily this mutex use along with the removal of the use of channels actually lead to performance improvements. I believe this may mostly be due to the simplified process of reading input from the TTY file descriptor. I now just spin off a thread for each tty and in that thread there is a simple loop which reads and then writes directly to the ansi processor, skipping the previous process of sending bytes over a channel and then into an event loop.</p><p>Currently the key bindings default to Command + T for a new tab. Command + Shift + Left Bracket for previous tab and Command + Shift + Right Bracket for the next tab.</p><p>The latest build of Alacritty with tabs can be found at <a href="https://github.com/bebrws/alacritty-tabs/releases/">the release page</a>.</p><p>The code is up at <a href="https://github.com/bebrws/alacritty-tabs/">alacritty-tabs</a>. Note that this has only been tested on OSX.</p><h2>New Functionality</h2><p>Ability to jump back up to the last time the return key was pressed</p><p>Defaults to Command + G</p><h2>Screen Capture with Tabs</h2><p><img src="/static/alacrittytabs.gif" alt="Alacritty With Tabs in action"/></p><h2>Example alacritty.yml file:</h2><pre><code>
background_opacity: 1
window:
  dimensions:
    columns: 150
    lines: 50
  padding:
    x: 10
    y: 10
  dynamic_padding: true
  decorations: buttonless
scrolling:
  history: 10000
  multiplier: 40
key_bindings:
  - key: W
    mods: Command
    action: ToggleFullscreen
  - key: N
    mods: Command|Shift
    action: SpawnNewInstance
  - key: F
    mods: Command|Shift
    action: ToggleFullscreen
  - key: Equals
    mods: Command|Shift
    action: IncreaseFontSize
  - key: Minus
    mods: Command|Shift
    action: DecreaseFontSize
font:
  size: 12
  normal:
    family: Menlo
    style: Regular
  bold:
    family: Menlo
    style: Bold
  italic:
    family: Menlo
    style: Italic
custom_cursor_colors: true
colors:
  # Default colors
  primary:
    # hard contrast: background = &#x27;#f9f5d7&#x27;
    background: &#x27;#1A2025&#x27;
    foreground: &#x27;#e3dfc5&#x27;

    dim_foreground: &#x27;#dbdbdb&#x27;
    bright_foreground: &#x27;#d9d9d9&#x27;
    dim_background: &#x27;#202020&#x27;    # not sure
    bright_background: &#x27;#3a3a3a&#x27; # not sure

  # Cursor colors
  cursor:
    text: &#x27;#2c2c2c&#x27;
    cursor: &#x27;#d9d9d9&#x27;

  # Normal colors
  vi_mode_cursor:
    text: &#x27;#2e3440&#x27;
    cursor: &#x27;#d8dee9&#x27;
  selection:
    text: CellForeground
    background: &#x27;#4c566a&#x27;
  search:
    matches:
      foreground: CellBackground
      background: &#x27;#abd3de&#x27;
    bar:
      background: &#x27;#434c5e&#x27;
      foreground: &#x27;#d8dee9&#x27;
  normal:
  # Bright colors
    black: &#x27;#1c1c1c&#x27;
    red: &#x27;#bc5653&#x27;
    green: &#x27;#b4c28a&#x27;
    yellow: &#x27;#ebc17a&#x27;
    blue: &#x27;#7eaac7&#x27;
    magenta: &#x27;#aa6292&#x27;
    cyan: &#x27;#d3dde8&#x27;
    white: &#x27;#cacaca&#x27;

  # Bright colors
  bright:
    black: &#x27;#636363&#x27;
    red: &#x27;#bc5653&#x27;
    green: &#x27;#b4c28a&#x27;
    yellow: &#x27;#ebc17a&#x27;
    blue: &#x27;#7eaac7&#x27;
    magenta: &#x27;#aa6292&#x27;
    cyan: &#x27;#d3dde8&#x27;
    white: &#x27;#f7f7f7&#x27;

  # Dim colors
  dim:
    black: &#x27;#232323&#x27;
    red: &#x27;#74423f&#x27;
    green: &#x27;#9ea880&#x27;
    yellow: &#x27;#8b7653&#x27;
    blue: &#x27;#556b79&#x27;
    magenta: &#x27;#6e4962&#x27;
    cyan: &#x27;#5c8482&#x27;
    white: &#x27;#828282&#x27;
  indexed_colors:
    - {index: 16, color: &#x27;#232323&#x27;}
    - {index: 17, color: &#x27;#d65d0e&#x27;}
    - {index: 18, color: &#x27;#000000&#x27;}
    - {index: 19, color: &#x27;#d5c4a1&#x27;}
    - {index: 20, color: &#x27;#665c54&#x27;}
    - {index: 21, color: &#x27;#3c3836&#x27;}
hide_cursor_when_typing: true
shell:
  program: /bin/zsh
  args:
    - -l


</code></pre><p>This can be copy and pasted into a file which should be placed at:</p><pre><code>~/.config/alacritty/alacritty.yml
</code></pre></div></div></article><footer class="jsx-3387257903"><div class="jsx-3387257903 social-list"><div class="jsx-255066894"><a title="LinkedIn" href="https://www.linkedin.com/in/bbarrows/}" target="_blank" rel="noopener" class="jsx-255066894"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#222"><path fill="#444" d="M5.453 11.099v15.484H.297V11.099h5.156zm.328-4.781q.016 1.141-.789 1.906t-2.117.766h-.031q-1.281 0-2.063-.766T0 6.318q0-1.156.805-1.914t2.102-.758 2.078.758.797 1.914zM24 17.708v8.875h-5.141v-8.281q0-1.641-.633-2.57t-1.977-.93q-.984 0-1.648.539t-.992 1.336q-.172.469-.172 1.266v8.641H8.296q.031-6.234.031-10.109t-.016-4.625l-.016-.75h5.141v2.25h-.031q.312-.5.641-.875t.883-.812 1.359-.68 1.789-.242q2.672 0 4.297 1.773t1.625 5.195z"></path></svg></a><a title="GitHub" href="https://github.com/bebrws/" target="_blank" rel="noopener" class="jsx-255066894"><svg viewBox="0 0 11 11" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2" width="24" height="24" fill="#222"><path d="M10.5 5.63a4.992 4.992 0 01-.977 3.016A5.018 5.018 0 016.998 10.5c-.12.022-.207.007-.263-.047a.267.267 0 01-.083-.2v-1.41c0-.432-.116-.748-.347-.948.253-.027.481-.067.683-.12.203-.054.412-.14.627-.26.216-.121.396-.27.54-.445.145-.176.263-.41.354-.702.091-.291.137-.626.137-1.005a1.95 1.95 0 00-.527-1.376c.164-.405.147-.86-.053-1.363-.125-.04-.305-.015-.54.074a3.59 3.59 0 00-.614.294l-.254.16a4.727 4.727 0 00-1.28-.174c-.44 0-.867.058-1.28.174a5.931 5.931 0 00-.284-.18 3.995 3.995 0 00-.557-.258c-.254-.1-.445-.13-.574-.09-.195.504-.211.958-.046 1.363a1.95 1.95 0 00-.527 1.376c0 .379.045.713.136 1.002.092.29.208.523.35.702.143.178.322.327.537.447.216.12.425.207.627.26.203.054.43.094.684.12-.178.161-.287.39-.327.689a1.32 1.32 0 01-.3.1 1.885 1.885 0 01-.38.034A.785.785 0 013 8.573a1.177 1.177 0 01-.37-.418 1.077 1.077 0 00-.324-.347.973.973 0 00-.33-.16l-.133-.02a.432.432 0 00-.194.03c-.035.02-.046.045-.033.077a.487.487 0 00.147.174l.046.033c.098.044.195.129.29.254.096.124.166.238.21.34l.067.154c.058.17.156.306.294.41.138.105.287.172.447.201.16.029.314.045.463.047a1.96 1.96 0 00.37-.024l.154-.026a62.026 62.026 0 00.007.955c0 .08-.03.147-.087.2-.058.054-.147.07-.267.047a5.018 5.018 0 01-2.524-1.854A4.992 4.992 0 01.255 5.63c0-.93.23-1.789.687-2.575a5.103 5.103 0 011.865-1.867A5.005 5.005 0 015.377.5c.93 0 1.787.23 2.572.688a5.103 5.103 0 011.864 1.867c.458.786.687 1.645.687 2.575z" fill="#444" fill-rule="nonzero"></path></svg></a></div></div><p class="jsx-3618008669">Â© 2021</p></footer></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"Alacritty - tab support","dateString":"2021-01-17","slug":"alacritty-tabs","description":"","tags":["alacritty"],"author":"bebrws","source":{"compiledSource":"\"use strict\";\n\nvar _excluded = [\"components\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h2\", null, \"Re-Write of The Alacritty Event Loop\"), mdx(\"p\", null, \"While getting started on this I found an awesome project named \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/nw0/session-manager\"\n  }, \"session-manager\"), \".\"), mdx(\"p\", null, \"This provided a great way for me to see how the lower level TTY code and ansi processing was implemented.\"), mdx(\"p\", null, \"I played around with this for a while, adding support for colors and then upon realizing that most of this session-manager code came from Alacritty, decided that I should give adding tabs to Alacritty a shot.\"), mdx(\"p\", null, \"When digging into the Alacritty source I realized I would need some struct to manage the tabs and Term/PTY struct state throughout the app. Unfortunately this meant passing around an\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"Arc\u003cMutex\u003cT\u003e\u003e\\n\")), mdx(\"p\", null, \"and lots of locking and unlocking.\"), mdx(\"p\", null, \"Luckily this mutex use along with the removal of the use of channels actually lead to performance improvements. I believe this may mostly be due to the simplified process of reading input from the TTY file descriptor. I now just spin off a thread for each tty and in that thread there is a simple loop which reads and then writes directly to the ansi processor, skipping the previous process of sending bytes over a channel and then into an event loop.\"), mdx(\"p\", null, \"Currently the key bindings default to Command + T for a new tab. Command + Shift + Left Bracket for previous tab and Command + Shift + Right Bracket for the next tab.\"), mdx(\"p\", null, \"The latest build of Alacritty with tabs can be found at \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/bebrws/alacritty-tabs/releases/\"\n  }, \"the release page\"), \".\"), mdx(\"p\", null, \"The code is up at \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/bebrws/alacritty-tabs/\"\n  }, \"alacritty-tabs\"), \". Note that this has only been tested on OSX.\"), mdx(\"h2\", null, \"New Functionality\"), mdx(\"p\", null, \"Ability to jump back up to the last time the return key was pressed\"), mdx(\"p\", null, \"Defaults to Command + G\"), mdx(\"h2\", null, \"Screen Capture with Tabs\"), mdx(\"p\", null, mdx(\"img\", {\n    parentName: \"p\",\n    \"src\": \"/static/alacrittytabs.gif\",\n    \"alt\": \"Alacritty With Tabs in action\"\n  })), mdx(\"h2\", null, \"Example alacritty.yml file:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"\\nbackground_opacity: 1\\nwindow:\\n  dimensions:\\n    columns: 150\\n    lines: 50\\n  padding:\\n    x: 10\\n    y: 10\\n  dynamic_padding: true\\n  decorations: buttonless\\nscrolling:\\n  history: 10000\\n  multiplier: 40\\nkey_bindings:\\n  - key: W\\n    mods: Command\\n    action: ToggleFullscreen\\n  - key: N\\n    mods: Command|Shift\\n    action: SpawnNewInstance\\n  - key: F\\n    mods: Command|Shift\\n    action: ToggleFullscreen\\n  - key: Equals\\n    mods: Command|Shift\\n    action: IncreaseFontSize\\n  - key: Minus\\n    mods: Command|Shift\\n    action: DecreaseFontSize\\nfont:\\n  size: 12\\n  normal:\\n    family: Menlo\\n    style: Regular\\n  bold:\\n    family: Menlo\\n    style: Bold\\n  italic:\\n    family: Menlo\\n    style: Italic\\ncustom_cursor_colors: true\\ncolors:\\n  # Default colors\\n  primary:\\n    # hard contrast: background = '#f9f5d7'\\n    background: '#1A2025'\\n    foreground: '#e3dfc5'\\n\\n    dim_foreground: '#dbdbdb'\\n    bright_foreground: '#d9d9d9'\\n    dim_background: '#202020'    # not sure\\n    bright_background: '#3a3a3a' # not sure\\n\\n  # Cursor colors\\n  cursor:\\n    text: '#2c2c2c'\\n    cursor: '#d9d9d9'\\n\\n  # Normal colors\\n  vi_mode_cursor:\\n    text: '#2e3440'\\n    cursor: '#d8dee9'\\n  selection:\\n    text: CellForeground\\n    background: '#4c566a'\\n  search:\\n    matches:\\n      foreground: CellBackground\\n      background: '#abd3de'\\n    bar:\\n      background: '#434c5e'\\n      foreground: '#d8dee9'\\n  normal:\\n  # Bright colors\\n    black: '#1c1c1c'\\n    red: '#bc5653'\\n    green: '#b4c28a'\\n    yellow: '#ebc17a'\\n    blue: '#7eaac7'\\n    magenta: '#aa6292'\\n    cyan: '#d3dde8'\\n    white: '#cacaca'\\n\\n  # Bright colors\\n  bright:\\n    black: '#636363'\\n    red: '#bc5653'\\n    green: '#b4c28a'\\n    yellow: '#ebc17a'\\n    blue: '#7eaac7'\\n    magenta: '#aa6292'\\n    cyan: '#d3dde8'\\n    white: '#f7f7f7'\\n\\n  # Dim colors\\n  dim:\\n    black: '#232323'\\n    red: '#74423f'\\n    green: '#9ea880'\\n    yellow: '#8b7653'\\n    blue: '#556b79'\\n    magenta: '#6e4962'\\n    cyan: '#5c8482'\\n    white: '#828282'\\n  indexed_colors:\\n    - {index: 16, color: '#232323'}\\n    - {index: 17, color: '#d65d0e'}\\n    - {index: 18, color: '#000000'}\\n    - {index: 19, color: '#d5c4a1'}\\n    - {index: 20, color: '#665c54'}\\n    - {index: 21, color: '#3c3836'}\\nhide_cursor_when_typing: true\\nshell:\\n  program: /bin/zsh\\n  args:\\n    - -l\\n\\n\\n\")), mdx(\"p\", null, \"This can be copy and pasted into a file which should be placed at:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"~/.config/alacritty/alacritty.yml\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003ch2\u003eRe-Write of The Alacritty Event Loop\u003c/h2\u003e\u003cp\u003eWhile getting started on this I found an awesome project named \u003ca href=\"https://github.com/nw0/session-manager\"\u003esession-manager\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eThis provided a great way for me to see how the lower level TTY code and ansi processing was implemented.\u003c/p\u003e\u003cp\u003eI played around with this for a while, adding support for colors and then upon realizing that most of this session-manager code came from Alacritty, decided that I should give adding tabs to Alacritty a shot.\u003c/p\u003e\u003cp\u003eWhen digging into the Alacritty source I realized I would need some struct to manage the tabs and Term/PTY struct state throughout the app. Unfortunately this meant passing around an\u003c/p\u003e\u003cpre\u003e\u003ccode\u003eArc\u0026lt;Mutex\u0026lt;T\u0026gt;\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eand lots of locking and unlocking.\u003c/p\u003e\u003cp\u003eLuckily this mutex use along with the removal of the use of channels actually lead to performance improvements. I believe this may mostly be due to the simplified process of reading input from the TTY file descriptor. I now just spin off a thread for each tty and in that thread there is a simple loop which reads and then writes directly to the ansi processor, skipping the previous process of sending bytes over a channel and then into an event loop.\u003c/p\u003e\u003cp\u003eCurrently the key bindings default to Command + T for a new tab. Command + Shift + Left Bracket for previous tab and Command + Shift + Right Bracket for the next tab.\u003c/p\u003e\u003cp\u003eThe latest build of Alacritty with tabs can be found at \u003ca href=\"https://github.com/bebrws/alacritty-tabs/releases/\"\u003ethe release page\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eThe code is up at \u003ca href=\"https://github.com/bebrws/alacritty-tabs/\"\u003ealacritty-tabs\u003c/a\u003e. Note that this has only been tested on OSX.\u003c/p\u003e\u003ch2\u003eNew Functionality\u003c/h2\u003e\u003cp\u003eAbility to jump back up to the last time the return key was pressed\u003c/p\u003e\u003cp\u003eDefaults to Command + G\u003c/p\u003e\u003ch2\u003eScreen Capture with Tabs\u003c/h2\u003e\u003cp\u003e\u003cimg src=\"/static/alacrittytabs.gif\" alt=\"Alacritty With Tabs in action\"/\u003e\u003c/p\u003e\u003ch2\u003eExample alacritty.yml file:\u003c/h2\u003e\u003cpre\u003e\u003ccode\u003e\nbackground_opacity: 1\nwindow:\n  dimensions:\n    columns: 150\n    lines: 50\n  padding:\n    x: 10\n    y: 10\n  dynamic_padding: true\n  decorations: buttonless\nscrolling:\n  history: 10000\n  multiplier: 40\nkey_bindings:\n  - key: W\n    mods: Command\n    action: ToggleFullscreen\n  - key: N\n    mods: Command|Shift\n    action: SpawnNewInstance\n  - key: F\n    mods: Command|Shift\n    action: ToggleFullscreen\n  - key: Equals\n    mods: Command|Shift\n    action: IncreaseFontSize\n  - key: Minus\n    mods: Command|Shift\n    action: DecreaseFontSize\nfont:\n  size: 12\n  normal:\n    family: Menlo\n    style: Regular\n  bold:\n    family: Menlo\n    style: Bold\n  italic:\n    family: Menlo\n    style: Italic\ncustom_cursor_colors: true\ncolors:\n  # Default colors\n  primary:\n    # hard contrast: background = \u0026#x27;#f9f5d7\u0026#x27;\n    background: \u0026#x27;#1A2025\u0026#x27;\n    foreground: \u0026#x27;#e3dfc5\u0026#x27;\n\n    dim_foreground: \u0026#x27;#dbdbdb\u0026#x27;\n    bright_foreground: \u0026#x27;#d9d9d9\u0026#x27;\n    dim_background: \u0026#x27;#202020\u0026#x27;    # not sure\n    bright_background: \u0026#x27;#3a3a3a\u0026#x27; # not sure\n\n  # Cursor colors\n  cursor:\n    text: \u0026#x27;#2c2c2c\u0026#x27;\n    cursor: \u0026#x27;#d9d9d9\u0026#x27;\n\n  # Normal colors\n  vi_mode_cursor:\n    text: \u0026#x27;#2e3440\u0026#x27;\n    cursor: \u0026#x27;#d8dee9\u0026#x27;\n  selection:\n    text: CellForeground\n    background: \u0026#x27;#4c566a\u0026#x27;\n  search:\n    matches:\n      foreground: CellBackground\n      background: \u0026#x27;#abd3de\u0026#x27;\n    bar:\n      background: \u0026#x27;#434c5e\u0026#x27;\n      foreground: \u0026#x27;#d8dee9\u0026#x27;\n  normal:\n  # Bright colors\n    black: \u0026#x27;#1c1c1c\u0026#x27;\n    red: \u0026#x27;#bc5653\u0026#x27;\n    green: \u0026#x27;#b4c28a\u0026#x27;\n    yellow: \u0026#x27;#ebc17a\u0026#x27;\n    blue: \u0026#x27;#7eaac7\u0026#x27;\n    magenta: \u0026#x27;#aa6292\u0026#x27;\n    cyan: \u0026#x27;#d3dde8\u0026#x27;\n    white: \u0026#x27;#cacaca\u0026#x27;\n\n  # Bright colors\n  bright:\n    black: \u0026#x27;#636363\u0026#x27;\n    red: \u0026#x27;#bc5653\u0026#x27;\n    green: \u0026#x27;#b4c28a\u0026#x27;\n    yellow: \u0026#x27;#ebc17a\u0026#x27;\n    blue: \u0026#x27;#7eaac7\u0026#x27;\n    magenta: \u0026#x27;#aa6292\u0026#x27;\n    cyan: \u0026#x27;#d3dde8\u0026#x27;\n    white: \u0026#x27;#f7f7f7\u0026#x27;\n\n  # Dim colors\n  dim:\n    black: \u0026#x27;#232323\u0026#x27;\n    red: \u0026#x27;#74423f\u0026#x27;\n    green: \u0026#x27;#9ea880\u0026#x27;\n    yellow: \u0026#x27;#8b7653\u0026#x27;\n    blue: \u0026#x27;#556b79\u0026#x27;\n    magenta: \u0026#x27;#6e4962\u0026#x27;\n    cyan: \u0026#x27;#5c8482\u0026#x27;\n    white: \u0026#x27;#828282\u0026#x27;\n  indexed_colors:\n    - {index: 16, color: \u0026#x27;#232323\u0026#x27;}\n    - {index: 17, color: \u0026#x27;#d65d0e\u0026#x27;}\n    - {index: 18, color: \u0026#x27;#000000\u0026#x27;}\n    - {index: 19, color: \u0026#x27;#d5c4a1\u0026#x27;}\n    - {index: 20, color: \u0026#x27;#665c54\u0026#x27;}\n    - {index: 21, color: \u0026#x27;#3c3836\u0026#x27;}\nhide_cursor_when_typing: true\nshell:\n  program: /bin/zsh\n  args:\n    - -l\n\n\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis can be copy and pasted into a file which should be placed at:\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e~/.config/alacritty/alacritty.yml\n\u003c/code\u003e\u003c/pre\u003e","scope":{"slug":"alacritty-tabs","title":"Alacritty - tab support","date":"2021-01-17","author":"bebrws","tags":["alacritty"]}}},"__N_SSG":true},"page":"/projects/[project]","query":{"project":"alacritty-tabs"},"buildId":"rjKr5klLgyvolA-jXqYtb","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>