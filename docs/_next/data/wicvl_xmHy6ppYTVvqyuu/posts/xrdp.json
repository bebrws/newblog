{"pageProps":{"title":"Configuring xrdp on Ubuntu 20.04","dateString":"2021-04-20","slug":"xrdp","description":"","tags":["linux"],"author":"bebrws","source":{"compiledSource":"\"use strict\";\n\nvar _excluded = [\"components\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", null, \"The Issues and Solutions\"), mdx(\"p\", null, \"I was getting no and then garbled output when trying to connect to xrdp on Ubuntu.\"), mdx(\"p\", null, \"To fix the no output and garbled lines you need to edit a file named \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"em\", {\n    parentName: \"strong\"\n  }, \"/etc/X11/Xwrapper.config\")), \" and add the following:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"allowed_users =anybody\\nneeds_root_rights=no\\n\")), mdx(\"p\", null, \"Then my \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"em\", {\n    parentName: \"strong\"\n  }, \"/etc/xrdp/startwm.sh\")), \" file looks like:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"#!/bin/sh\\n# xrdp X session start script (c) 2015, 2017 mirabilos\\n# published under The MirOS Licence\\n\\nunset DBUS_SESSION_BUS_ADDRESS\\nunset XDG_RUNTIME_DIR\\n\\nif [ -r /etc/default/locale ]; then\\n  . /etc/default/locale\\n  export LANG LANGUAGE\\nfi\\n\\ngnome-session\\nexit 0\\n\")), mdx(\"h1\", null, \"The Remaining Issue\"), mdx(\"p\", null, \"However after setting needs\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"root_rights=no in \", \"*\", \"*\", \"_\", \"Xwrapper.config\"), \"*\", \"*\", \" I can no longer login from the actual PI Gnome login. This had to be removed and the Pi restarted to get logins working again.\"), mdx(\"h1\", null, \"XFCE4 To th Rescue\"), mdx(\"p\", null, \"Run:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"sudo apt-get install -y xfce4\\n\")), mdx(\"p\", null, \"Edit \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"em\", {\n    parentName: \"strong\"\n  }, \"/etc/xrdpstartwm.sh\")), \":\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"#!/bin/sh\\n# xrdp X session start script (c) 2015, 2017 mirabilos\\n# published under The MirOS Licence\\n\\nunset DBUS_SESSION_BUS_ADDRESS\\nunset XDG_RUNTIME_DIR\\n\\nif [ -r /etc/default/locale ]; then\\n  . /etc/default/locale\\n  export LANG LANGUAGE\\nfi\\n\\n# xfce\\nexec startxfce4\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"<div style=\"position:relative\"><span style=\"position:absolute;margin-left:-1.5em;font-weight:300;font-size:1.5rem;color:#9b9b9b\">#</span><h1 id=\"The%20Issues%20and%20Solutions\" class=\"jsx-2373991563\"><a href=\"#The%20Issues%20and%20Solutions\" class=\"jsx-2373991563\">The Issues and Solutions</a></h1></div><p>I was getting no and then garbled output when trying to connect to xrdp on Ubuntu.</p><p>To fix the no output and garbled lines you need to edit a file named <strong><em>/etc/X11/Xwrapper.config</em></strong> and add the following:</p><pre><code>allowed_users =anybody\nneeds_root_rights=no\n</code></pre><p>Then my <strong><em>/etc/xrdp/startwm.sh</em></strong> file looks like:</p><pre><code>#!/bin/sh\n# xrdp X session start script (c) 2015, 2017 mirabilos\n# published under The MirOS Licence\n\nunset DBUS_SESSION_BUS_ADDRESS\nunset XDG_RUNTIME_DIR\n\nif [ -r /etc/default/locale ]; then\n  . /etc/default/locale\n  export LANG LANGUAGE\nfi\n\ngnome-session\nexit 0\n</code></pre><div style=\"position:relative\"><span style=\"position:absolute;margin-left:-1.5em;font-weight:300;font-size:1.5rem;color:#9b9b9b\">#</span><h1 id=\"The%20Remaining%20Issue\" class=\"jsx-2373991563\"><a href=\"#The%20Remaining%20Issue\" class=\"jsx-2373991563\">The Remaining Issue</a></h1></div><p>However after setting needs<em>root_rights=no in <!-- -->*<!-- -->*<!-- -->_<!-- -->Xwrapper.config</em>*<!-- -->*<!-- --> I can no longer login from the actual PI Gnome login. This had to be removed and the Pi restarted to get logins working again.</p><div style=\"position:relative\"><span style=\"position:absolute;margin-left:-1.5em;font-weight:300;font-size:1.5rem;color:#9b9b9b\">#</span><h1 id=\"XFCE4%20To%20th%20Rescue\" class=\"jsx-2373991563\"><a href=\"#XFCE4%20To%20th%20Rescue\" class=\"jsx-2373991563\">XFCE4 To th Rescue</a></h1></div><p>Run:</p><pre><code>sudo apt-get install -y xfce4\n</code></pre><p>Edit <strong><em>/etc/xrdpstartwm.sh</em></strong>:</p><pre><code>#!/bin/sh\n# xrdp X session start script (c) 2015, 2017 mirabilos\n# published under The MirOS Licence\n\nunset DBUS_SESSION_BUS_ADDRESS\nunset XDG_RUNTIME_DIR\n\nif [ -r /etc/default/locale ]; then\n  . /etc/default/locale\n  export LANG LANGUAGE\nfi\n\n# xfce\nexec startxfce4\n</code></pre>","scope":{"slug":"xrdp","title":"Configuring xrdp on Ubuntu 20.04","date":"2021-04-20","author":"bebrws","tags":["linux"]}}},"__N_SSG":true}